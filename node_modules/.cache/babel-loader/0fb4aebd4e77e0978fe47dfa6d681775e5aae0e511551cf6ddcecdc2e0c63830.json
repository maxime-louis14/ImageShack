{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Moi\\\\Documents\\\\GitHub\\\\projet_pas_fou_react.js\\\\src\\\\pages\\\\Compte.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { authContext } from \"../Context/authContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport Photos from \"./Photos\";\nimport \"./style/compte.css\";\nimport Gallery from \"../Component/Gallery\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DeleteAccount = _ref => {\n  _s();\n  let {\n    userId\n  } = _ref;\n  const {\n    auth,\n    setAuth\n  } = useContext(authContext);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const Navigate = useNavigate();\n  const handleDelete = () => {\n    setIsDeleting(true);\n    const token = localStorage.getItem('token');\n\n    // Effectuer la requête de suppression sans axios\n    fetch('http://127.0.0.1:3000/account', {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(data => {\n      setIsDeleting(false);\n      alert(data.message);\n      localStorage.removeItem(\"userId\");\n      localStorage.removeItem(\"token\");\n      if (data.logaout) {\n        setAuth(null);\n      }\n      Navigate(\"/inscription\");\n      window.location.reload();\n    }).catch(error => {\n      console.error(error);\n      setIsDeleting(false);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Photos, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"DeleteAccount\",\n      children: [isDeleting ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Deleting account...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Are you sure you want to delete your account?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDelete,\n          children: \"Supprimer le compte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true), auth && /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            localStorage.removeItem(\"token\");\n            setAuth(null);\n          },\n          children: \"D\\xE9connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Gallery, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n_s(DeleteAccount, \"XoJyOTgPZblS6xz8iPCk3JtpMzM=\", false, function () {\n  return [useNavigate];\n});\n_c = DeleteAccount;\nexport default DeleteAccount;\nvar _c;\n$RefreshReg$(_c, \"DeleteAccount\");","map":{"version":3,"names":["React","useEffect","useState","useContext","authContext","useNavigate","Photos","Gallery","jsxDEV","_jsxDEV","Fragment","_Fragment","DeleteAccount","_ref","_s","userId","auth","setAuth","isDeleting","setIsDeleting","Navigate","handleDelete","token","localStorage","getItem","fetch","method","headers","then","response","json","data","alert","message","removeItem","logaout","window","location","reload","catch","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Moi/Documents/GitHub/projet_pas_fou_react.js/src/pages/Compte.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { authContext } from \"../Context/authContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Photos from \"./Photos\";\r\nimport \"./style/compte.css\"\r\nimport Gallery from \"../Component/Gallery\";\r\n\r\nconst DeleteAccount = ({ userId }) => {\r\n  const { auth, setAuth } = useContext(authContext);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const Navigate = useNavigate();\r\n\r\n  const handleDelete = () => {\r\n    setIsDeleting(true);\r\n    const token = localStorage.getItem('token');\r\n\r\n    // Effectuer la requête de suppression sans axios\r\n    fetch('http://127.0.0.1:3000/account', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      setIsDeleting(false);\r\n      alert(data.message);\r\n      localStorage.removeItem(\"userId\");\r\n      localStorage.removeItem(\"token\");\r\n\r\n      if (data.logaout) {\r\n        setAuth(null);\r\n      }\r\n\r\n      Navigate(\"/inscription\");\r\n      window.location.reload();\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n      setIsDeleting(false);\r\n    });\r\n  };\r\n\r\n  return (<>\r\n    <Photos/>\r\n    \r\n    <div className=\"DeleteAccount\">\r\n      {isDeleting ? (\r\n        <p>Deleting account...</p>\r\n      ) : (\r\n        <>\r\n          <p>Are you sure you want to delete your account?</p>\r\n          <button onClick={handleDelete}>Supprimer le compte</button>\r\n        </>\r\n      )}\r\n\r\n      {auth && (\r\n        <li>\r\n          <button\r\n            onClick={() => {\r\n              localStorage.removeItem(\"token\");\r\n              setAuth(null);\r\n            }}\r\n          >\r\n            Déconnexion\r\n          </button>\r\n        </li>\r\n      )}\r\n    </div>\r\n    \r\n    <Gallery />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DeleteAccount;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}